"use strict";var x=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var C=(t,n,e)=>n in t?x(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,F=(t,n)=>{for(var e in n||(n={}))w.call(n,e)&&C(t,e,n[e]);if(h)for(var e of h(n))N.call(n,e)&&C(t,e,n[e]);return t};var X=(t,n)=>{var e={};for(var r in t)w.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&h)for(var r of h(t))n.indexOf(r)<0&&N.call(t,r)&&(e[r]=t[r]);return e};var q=(t,n)=>{for(var e in n)x(t,e,{get:n[e],enumerable:!0})},K=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of $(n))!w.call(t,i)&&i!==e&&x(t,i,{get:()=>n[i],enumerable:!(r=L(n,i))||r.enumerable});return t};var z=t=>K(x({},"__esModule",{value:!0}),t);var ot={};q(ot,{EmptyArray:()=>p,For:()=>Z,If:()=>V,computed:()=>Q,context:()=>g,effect:()=>f,isSignal:()=>y,safeId:()=>H,signal:()=>d,signalJSX:()=>l,signalStorage:()=>nt,useInitStorage:()=>et,useSignal:()=>rt});module.exports=z(ot);var g=[];function f(t){let n=()=>{g.push(n);try{t()}finally{g.pop()}};n()}var p=[];var T=0,B=Number.MAX_SAFE_INTEGER-9e5,j=0;function H(){return T+=1,T>B&&(T=0,j+=1),j+""+T}function y(t){return typeof t=="function"&&t.__signal}function d(t){let n=new Set,e=()=>{let i=g[g.length-1];return i&&n.add(i),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(i,a,u){if(a==="value"){i.value=u;for(let c of n)c()}return!0}})}function Q(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}var E=require("react");var U={value:!0,className:!0};function v(t,n,e){!t||(n==="children"?t.textContent=e:n==="value"?requestAnimationFrame(()=>{t.value=e}):n==="style"?Object.assign(t.style,e):U[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e)}var W=Symbol("signal.element"),Y=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]);function P(t){let n=[];for(let e=0;e<t.length;e++)Array.isArray(t[e])?n=n.concat(P(t[e])):n.push(t[e]);return n}var O=t=>{let n=!1;return[P(t).map(r=>y(r)?(n=!0,l(r())):l(r)),n]};function l(t){if(!t||t._signalComponent)return t;let J=t,{props:n,ref:e}=J,r=X(J,["props","ref"]);if(!n||typeof r.type=="function")return t;let i=typeof t.type=="string",a=F({},n),u=[],c,I=null;return Object.keys(n).forEach(s=>{let o=n[s];if(o!=null&&!Y.has(s)){if(s==="children")if(Array.isArray(o)){let[m,A]=O(o);A&&u.push(()=>{let[G]=O(o);v(c,s,G.join(""))}),a.children=m;return}else if(y(o)){u.push(()=>{let A=o();v(c,s,A)});let m=o();y(m)?a.children=m():a.children=o()}else a.children=l(o);y(o)&&(u.push(()=>{let m=o();c&&v(c,s,m)}),a[s]=o())}}),f(()=>{u.forEach(s=>s())}),i&&u.length&&(I=s=>{c=s,e&&e(s)}),F({_signalComponent:W,props:a,ref:I||e},r)}var _=require("react/jsx-runtime");function Z({each:t,children:n}){let[e,r]=(0,E.useState)(t());return(0,E.useMemo)(()=>{f(()=>{r(t())})},p),e&&e.length?l((0,_.jsx)(_.Fragment,{children:e.map(n)})):null}var b=require("react");function V({value:t,children:n}){let[e,r]=(0,b.useState)(!!t());return(0,b.useMemo)(()=>{typeof t=="function"&&f(()=>{r(t())})},p),e?l(n):null}var R=require("react");function k(t){if(typeof window=="undefined")return;let n=localStorage.getItem(t);if(!!n)try{return JSON.parse(n).j}catch(e){return}}function tt(t,n){typeof window!="undefined"&&localStorage.setItem(t,JSON.stringify({j:n}))}var M=[],S=0;function nt(t,n){let e=d(n);return M.push({signal:e,key:t}),f(()=>{let r=e();S&&(S===2&&tt(t,r),S===1&&(S=2))}),e}function et(){(0,R.useEffect)(()=>{typeof window!="undefined"&&(S=1,M.forEach(t=>{let n=k(t.key);t.signal.value=n===void 0?t.signal.value:n}))},p)}var D=require("react");function rt(t){return(0,D.useRef)(d(t)).current}
