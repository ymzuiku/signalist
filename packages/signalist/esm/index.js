var X=Object.defineProperty;var x=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var b=(t,n,e)=>n in t?X(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,F=(t,n)=>{for(var e in n||(n={}))A.call(n,e)&&b(t,e,n[e]);if(x)for(var e of x(n))w.call(n,e)&&b(t,e,n[e]);return t};var I=(t,n)=>{var e={};for(var r in t)A.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&x)for(var r of x(t))n.indexOf(r)<0&&w.call(t,r)&&(e[r]=t[r]);return e};var m=[];function f(t){let n=()=>{m.push(n);try{t()}finally{m.pop()}};n()}var c=[];var d=0,L=Number.MAX_SAFE_INTEGER-9e5,J=0;function W(){return d+=1,d>L&&(d=0,J+=1),J+""+d}function T(t){return typeof t=="function"&&t.__signal}function v(t){let n=new Set,e=()=>{let i=m[m.length-1];return i&&n.add(i),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(i,l,a){if(l==="value"){i.value=a;for(let y of n)y()}return!0}})}function V(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}import{useLayoutEffect as G,useState as $}from"react";var O={value:!0,className:!0};function j(t,n,e){n==="children"?t.textContent=e:n==="value"?requestAnimationFrame(()=>{t.value=e}):n==="style"?Object.assign(t.style,e):O[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e}var P=Symbol("signal.element"),R=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]);function E(t){let n=[];for(let e=0;e<t.length;e++)Array.isArray(t[e])?n=n.concat(E(t[e])):n.push(t[e]);return n}function u(t){if(!t||t._signalComponent)return t;let _=t,{props:n,ref:e}=_,r=I(_,["props","ref"]);if(!n||typeof t.type!="string")return t;let i={},l=[],a;Object.keys(n).forEach(o=>{let s=n[o];if(s==null&&(i[o]=s),R.has(o)){i[o]=s;return}if(T(s)){l.push(()=>{let S=s();a&&j(a,o,S)}),i[o]=s();return}if(o==="children"&&Array.isArray(s)){let S=!1,N=E(s).map(p=>T(p)?(S=!0,u(p())):u(p));S&&l.push(()=>{let p=E(s).map(h=>u(T(h)?h():h)).join("");a&&(a.textContent=p)}),i[o]=N;return}i[o]=s}),f(()=>{l.forEach(o=>o())});let y=null;return l.length&&(y=o=>{a=o,e&&e(o)}),F({_signalComponent:P,props:i,ref:y||e},r)}function gt({each:t,children:n}){let[e,r]=$(t());return G(()=>{f(()=>{r(t())})},c),e&&e.length?u(e.map(n)):null}import{useLayoutEffect as q,useState as D}from"react";function Tt({value:t,children:n}){let[e,r]=D(!!t());return q(()=>{f(()=>{r(!!t())})},c),e?u(n):null}import{useEffect as K}from"react";function M(t){if(typeof window=="undefined")return;let n=localStorage.getItem(t);if(!!n)try{return JSON.parse(n).j}catch(e){return}}function z(t,n){typeof window!="undefined"&&localStorage.setItem(t,JSON.stringify({j:n}))}var C=[],g=0;function bt(t,n){let e=v(n);return C.push({signal:e,key:t}),f(()=>{let r=e();g&&(g===2&&z(t,r),g===1&&(g=2))}),e}function At(){K(()=>{typeof window!="undefined"&&(g=1,C.forEach(t=>{let n=M(t.key);t.signal.value=n===void 0?t.signal.value:n}))},c)}import{useRef as B}from"react";function jt(t){return B(v(t)).current}export{c as EmptyArray,gt as For,Tt as If,V as computed,m as context,f as effect,T as isSignal,W as safeId,v as signal,u as signalJSX,bt as signalStorage,At as useInitStorage,jt as useSignal};
