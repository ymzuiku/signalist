var I=Object.defineProperty;var g=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var E=(t,n,e)=>n in t?I(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,h=(t,n)=>{for(var e in n||(n={}))v.call(n,e)&&E(t,e,n[e]);if(g)for(var e of g(n))d.call(n,e)&&E(t,e,n[e]);return t};var A=(t,n)=>{var e={};for(var r in t)v.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&g)for(var r of g(t))n.indexOf(r)<0&&d.call(t,r)&&(e[r]=t[r]);return e};var l=[];function u(t){let n=()=>{l.push(n);try{t()}finally{l.pop()}};n()}var y=[];var x=0,R=Number.MAX_SAFE_INTEGER-9e5,w=0;function M(){return x+=1,x>R&&(x=0,w+=1),w+""+x}function S(t){return typeof t=="function"&&t.__signal}function F(t){let n=new Set,e=()=>{let s=l[l.length-1];return s&&n.add(s),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(s,f,a){if(f==="value"){s.value=a;for(let c of n)c()}return!0}})}function H(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}import{useLayoutEffect as X,useState as j}from"react";function et({each:t,children:n}){let[e,r]=j(t());return X(()=>{u(()=>{r(t())})},y),e&&e.length?e.map(n):null}import{useLayoutEffect as J,useState as L}from"react";function it({value:t,children:n}){let[e,r]=L(!!t());return J(()=>{u(()=>{r(!!t())})},y),e?n:null}var N=Symbol("signal.element"),P=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]);function ut(t){return T(t)}var O={value:!0,className:!0};function $(t,n,e){requestAnimationFrame(()=>{n==="children"?t.textContent=e:n==="value"?t.value=e:n==="style"?Object.assign(t.style,e):O[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e})}function T(t){if(!t||t._signalComponent||typeof t.type!="string")return t;let b=t,{props:n,ref:e}=b,r=A(b,["props","ref"]),s={},f=[],a;Object.keys(n).forEach(o=>{let i=n[o];if(P.has(o)){s[o]=i;return}if(S(i)){f.push(()=>{let m=i();a&&$(a,o,m)}),s[o]=i();return}if(o==="children"&&Array.isArray(i)){let m=!1,C=i.map(p=>S(p)?(m=!0,T(p())):T(p));m&&f.push(()=>{let p=i.map(_=>T(S(_)?_():_)).join("");a&&(a.textContent=p)}),s[o]=C;return}s[o]=i}),u(()=>{f.forEach(o=>o())});let c=null;return f.length&&(c=o=>{a=o,e&&e(o)}),h({_signalComponent:N,props:s,ref:c||e},r)}import{useRef as q}from"react";function yt(t){return q(F(t)).current}export{y as EmptyArray,et as For,it as If,H as computed,l as context,u as effect,S as isSignal,M as safeId,F as signal,T as signalJSX,ut as useJSX,yt as useSignal};
