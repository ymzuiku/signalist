var N=Object.defineProperty;var x=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var A=(t,n,e)=>n in t?N(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,F=(t,n)=>{for(var e in n||(n={}))b.call(n,e)&&A(t,e,n[e]);if(x)for(var e of x(n))w.call(n,e)&&A(t,e,n[e]);return t};var I=(t,n)=>{var e={};for(var r in t)b.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&x)for(var r of x(t))n.indexOf(r)<0&&w.call(t,r)&&(e[r]=t[r]);return e};var m=[];function a(t){let n=()=>{m.push(n);try{t()}finally{m.pop()}};n()}var c=[];var d=0,X=Number.MAX_SAFE_INTEGER-9e5,J=0;function W(){return d+=1,d>X&&(d=0,J+=1),J+""+d}function T(t){return typeof t=="function"&&t.__signal}function v(t){let n=new Set,e=()=>{let i=m[m.length-1];return i&&n.add(i),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(i,l,f){if(l==="value"){i.value=f;for(let y of n)y()}return!0}})}function V(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}import{useLayoutEffect as G,useState as $}from"react";var L=Symbol("signal.element"),O=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]),R={value:!0,className:!0};function P(t,n,e){n==="children"?t.textContent=e:n==="value"?requestAnimationFrame(()=>{t.value=e}):n==="style"?Object.assign(t.style,e):R[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e}function E(t){let n=[];for(let e=0;e<t.length;e++)Array.isArray(t[e])?n=n.concat(E(t[e])):n.push(t[e]);return n}function u(t){if(!t||t._signalComponent)return t;let _=t,{props:n,ref:e}=_,r=I(_,["props","ref"]);if(typeof t.type!="string")return t;let i={},l=[],f;Object.keys(n).forEach(o=>{let s=n[o];if(O.has(o)){i[o]=s;return}if(T(s)){l.push(()=>{let S=s();f&&P(f,o,S)}),i[o]=s();return}if(o==="children"&&Array.isArray(s)){let S=!1,C=E(s).map(p=>T(p)?(S=!0,u(p())):u(p));S&&l.push(()=>{let p=E(s).map(h=>u(T(h)?h():h)).join("");f&&(f.textContent=p)}),i[o]=C;return}i[o]=s}),a(()=>{l.forEach(o=>o())});let y=null;return l.length&&(y=o=>{f=o,e&&e(o)}),F({_signalComponent:L,props:i,ref:y||e},r)}function pt({each:t,children:n}){let[e,r]=$(t());return G(()=>{a(()=>{r(t())})},c),e&&e.length?u(e.map(n)):null}import{useLayoutEffect as q,useState as D}from"react";function xt({value:t,children:n}){let[e,r]=D(!!t());return q(()=>{a(()=>{r(!!t())})},c),e?u(n):null}import{useEffect as K}from"react";function M(t){if(typeof window=="undefined")return;let n=localStorage.getItem(t);if(!!n)try{return JSON.parse(n).j}catch(e){return}}function z(t,n){typeof window!="undefined"&&localStorage.setItem(t,JSON.stringify({j:n}))}var j=[],g=0;function Et(t,n){let e=v(n);return j.push({signal:e,key:t}),a(()=>{let r=e();g&&(g===2&&z(t,r),g===1&&(g=2))}),e}function _t(){K(()=>{typeof window!="undefined"&&(g=1,j.forEach(t=>{let n=M(t.key);t.signal.value=n===void 0?t.signal.value:n}))},c)}import{useRef as B}from"react";function It(t){return B(v(t)).current}export{c as EmptyArray,pt as For,xt as If,V as computed,m as context,a as effect,T as isSignal,W as safeId,v as signal,u as signalJSX,Et as signalStorage,_t as useInitStorage,It as useSignal};
