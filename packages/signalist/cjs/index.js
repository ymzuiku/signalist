"use strict";var v=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var I=(t,n,e)=>n in t?v(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,j=(t,n)=>{for(var e in n||(n={}))b.call(n,e)&&I(t,e,n[e]);if(T)for(var e of T(n))J.call(n,e)&&I(t,e,n[e]);return t};var C=(t,n)=>{var e={};for(var r in t)b.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&T)for(var r of T(t))n.indexOf(r)<0&&J.call(t,r)&&(e[r]=t[r]);return e};var $=(t,n)=>{for(var e in n)v(t,e,{get:n[e],enumerable:!0})},q=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of G(n))!b.call(t,o)&&o!==e&&v(t,o,{get:()=>n[o],enumerable:!(r=P(n,o))||r.enumerable});return t};var D=t=>q(v({},"__esModule",{value:!0}),t);var et={};$(et,{EmptyArray:()=>l,For:()=>W,If:()=>Y,computed:()=>z,context:()=>p,effect:()=>s,isSignal:()=>g,safeId:()=>M,signal:()=>y,signalJSX:()=>f,signalStorage:()=>k,useInitStorage:()=>tt,useSignal:()=>nt});module.exports=D(et);var p=[];function s(t){let n=()=>{p.push(n);try{t()}finally{p.pop()}};n()}var l=[];var h=0,K=Number.MAX_SAFE_INTEGER-9e5,N=0;function M(){return h+=1,h>K&&(h=0,N+=1),N+""+h}function g(t){return typeof t=="function"&&t.__signal}function y(t){let n=new Set,e=()=>{let o=p[p.length-1];return o&&n.add(o),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(o,c,u){if(c==="value"){o.value=u;for(let x of n)x()}return!0}})}function z(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}var E=require("react");var B=Symbol("signal.element"),H=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]),Q={value:!0,className:!0};function U(t,n,e){n==="children"?t.textContent=e:n==="value"?requestAnimationFrame(()=>{t.value=e}):n==="style"?Object.assign(t.style,e):Q[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e}function w(t){let n=[];for(let e=0;e<t.length;e++)Array.isArray(t[e])?n=n.concat(w(t[e])):n.push(t[e]);return n}function f(t){if(!t||t._signalComponent)return t;let F=t,{props:n,ref:e}=F,r=C(F,["props","ref"]);if(typeof t.type!="string")return t;let o={},c=[],u;Object.keys(n).forEach(i=>{let a=n[i];if(H.has(i)){o[i]=a;return}if(g(a)){c.push(()=>{let d=a();u&&U(u,i,d)}),o[i]=a();return}if(i==="children"&&Array.isArray(a)){let d=!1,R=w(a).map(m=>g(m)?(d=!0,f(m())):f(m));d&&c.push(()=>{let m=w(a).map(A=>f(g(A)?A():A)).join("");u&&(u.textContent=m)}),o[i]=R;return}o[i]=a}),s(()=>{c.forEach(i=>i())});let x=null;return c.length&&(x=i=>{u=i,e&&e(i)}),j({_signalComponent:B,props:o,ref:x||e},r)}function W({each:t,children:n}){let[e,r]=(0,E.useState)(t());return(0,E.useLayoutEffect)(()=>{s(()=>{r(t())})},l),e&&e.length?f(e.map(n)):null}var _=require("react");function Y({value:t,children:n}){let[e,r]=(0,_.useState)(!!t());return(0,_.useLayoutEffect)(()=>{s(()=>{r(!!t())})},l),e?f(n):null}var X=require("react");function Z(t){if(typeof window=="undefined")return;let n=localStorage.getItem(t);if(!!n)try{return JSON.parse(n).j}catch(e){return}}function V(t,n){typeof window!="undefined"&&localStorage.setItem(t,JSON.stringify({j:n}))}var L=[],S=0;function k(t,n){let e=y(n);return L.push({signal:e,key:t}),s(()=>{let r=e();S&&(S===2&&V(t,r),S===1&&(S=2))}),e}function tt(){(0,X.useEffect)(()=>{typeof window!="undefined"&&(S=1,L.forEach(t=>{let n=Z(t.key);t.signal.value=n===void 0?t.signal.value:n}))},l)}var O=require("react");function nt(t){return(0,O.useRef)(y(t)).current}
