"use strict";var v=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var I=(t,n,e)=>n in t?v(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,j=(t,n)=>{for(var e in n||(n={}))A.call(n,e)&&I(t,e,n[e]);if(T)for(var e of T(n))J.call(n,e)&&I(t,e,n[e]);return t};var C=(t,n)=>{var e={};for(var r in t)A.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&T)for(var r of T(t))n.indexOf(r)<0&&J.call(t,r)&&(e[r]=t[r]);return e};var q=(t,n)=>{for(var e in n)v(t,e,{get:n[e],enumerable:!0})},D=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of $(n))!A.call(t,o)&&o!==e&&v(t,o,{get:()=>n[o],enumerable:!(r=G(n,o))||r.enumerable});return t};var K=t=>D(v({},"__esModule",{value:!0}),t);var et={};q(et,{EmptyArray:()=>l,For:()=>W,If:()=>Y,computed:()=>B,context:()=>p,effect:()=>f,isSignal:()=>g,safeId:()=>z,signal:()=>y,signalJSX:()=>a,signalStorage:()=>k,useInitStorage:()=>tt,useSignal:()=>nt});module.exports=K(et);var p=[];function f(t){let n=()=>{p.push(n);try{t()}finally{p.pop()}};n()}var l=[];var h=0,M=Number.MAX_SAFE_INTEGER-9e5,N=0;function z(){return h+=1,h>M&&(h=0,N+=1),N+""+h}function g(t){return typeof t=="function"&&t.__signal}function y(t){let n=new Set,e=()=>{let o=p[p.length-1];return o&&n.add(o),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(o,c,u){if(c==="value"){o.value=u;for(let x of n)x()}return!0}})}function B(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}var E=require("react");var H={value:!0,className:!0};function X(t,n,e){n==="children"?t.textContent=e:n==="value"?requestAnimationFrame(()=>{t.value=e}):n==="style"?Object.assign(t.style,e):H[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e}var Q=Symbol("signal.element"),U=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]);function w(t){let n=[];for(let e=0;e<t.length;e++)Array.isArray(t[e])?n=n.concat(w(t[e])):n.push(t[e]);return n}function a(t){if(!t||t._signalComponent)return t;let F=t,{props:n,ref:e}=F,r=C(F,["props","ref"]);if(!n||typeof t.type!="string")return t;let o={},c=[],u;Object.keys(n).forEach(i=>{let s=n[i];if(s==null&&(o[i]=s),U.has(i)){o[i]=s;return}if(g(s)){c.push(()=>{let d=s();u&&X(u,i,d)}),o[i]=s();return}if(i==="children"&&Array.isArray(s)){let d=!1,R=w(s).map(m=>g(m)?(d=!0,a(m())):a(m));d&&c.push(()=>{let m=w(s).map(b=>a(g(b)?b():b)).join("");u&&(u.textContent=m)}),o[i]=R;return}o[i]=s}),f(()=>{c.forEach(i=>i())});let x=null;return c.length&&(x=i=>{u=i,e&&e(i)}),j({_signalComponent:Q,props:o,ref:x||e},r)}function W({each:t,children:n}){let[e,r]=(0,E.useState)(t());return(0,E.useLayoutEffect)(()=>{f(()=>{r(t())})},l),e&&e.length?a(e.map(n)):null}var _=require("react");function Y({value:t,children:n}){let[e,r]=(0,_.useState)(!!t());return(0,_.useLayoutEffect)(()=>{f(()=>{r(!!t())})},l),e?a(n):null}var L=require("react");function Z(t){if(typeof window=="undefined")return;let n=localStorage.getItem(t);if(!!n)try{return JSON.parse(n).j}catch(e){return}}function V(t,n){typeof window!="undefined"&&localStorage.setItem(t,JSON.stringify({j:n}))}var O=[],S=0;function k(t,n){let e=y(n);return O.push({signal:e,key:t}),f(()=>{let r=e();S&&(S===2&&V(t,r),S===1&&(S=2))}),e}function tt(){(0,L.useEffect)(()=>{typeof window!="undefined"&&(S=1,O.forEach(t=>{let n=Z(t.key);t.signal.value=n===void 0?t.signal.value:n}))},l)}var P=require("react");function nt(t){return(0,P.useRef)(y(t)).current}
