"use strict";var T=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var w=(t,n,e)=>n in t?T(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,C=(t,n)=>{for(var e in n||(n={}))d.call(n,e)&&w(t,e,n[e]);if(S)for(var e of S(n))F.call(n,e)&&w(t,e,n[e]);return t};var I=(t,n)=>{var e={};for(var r in t)d.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&S)for(var r of S(t))n.indexOf(r)<0&&F.call(t,r)&&(e[r]=t[r]);return e};var N=(t,n)=>{for(var e in n)T(t,e,{get:n[e],enumerable:!0})},P=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of L(n))!d.call(t,o)&&o!==e&&T(t,o,{get:()=>n[o],enumerable:!(r=J(n,o))||r.enumerable});return t};var O=t=>P(T({},"__esModule",{value:!0}),t);var W={};N(W,{EmptyArray:()=>c,For:()=>G,If:()=>K,computed:()=>D,context:()=>p,effect:()=>f,isSignal:()=>m,safeId:()=>q,signal:()=>h,signalJSX:()=>g,useJSX:()=>B,useSignal:()=>U});module.exports=O(W);var p=[];function f(t){let n=()=>{p.push(n);try{t()}finally{p.pop()}};n()}var c=[];var _=0,$=Number.MAX_SAFE_INTEGER-9e5,R=0;function q(){return _+=1,_>$&&(_=0,R+=1),R+""+_}function m(t){return typeof t=="function"&&t.__signal}function h(t){let n=new Set,e=()=>{let o=p[p.length-1];return o&&n.add(o),e.value};return e.value=t,e.__signal=!0,new Proxy(e,{set:function(o,u,a){if(u==="value"){o.value=a;for(let y of n)y()}return!0}})}function D(t){let n=()=>(n.value=t(),n.value);return n.value=t(),n.__signal=!0,n}var b=require("react");function G({each:t,children:n}){let[e,r]=(0,b.useState)(t());return(0,b.useLayoutEffect)(()=>{f(()=>{r(t())})},c),e&&e.length?e.map(n):null}var E=require("react");function K({value:t,children:n}){let[e,r]=(0,E.useState)(!!t());return(0,E.useLayoutEffect)(()=>{f(()=>{r(!!t())})},c),e?n:null}var M=Symbol("signal.element"),z=new Set(["$$typeof","key","ref","_owner","_store","_self","_source","_signal","_signalComponent"]);function B(t){return g(t)}var H={value:!0,className:!0};function Q(t,n,e){requestAnimationFrame(()=>{n==="children"?t.textContent=e:n==="value"?t.value=e:n==="style"?Object.assign(t.style,e):H[n]?t[n]=e:typeof e=="string"||typeof e=="number"?t.setAttribute(n,e):typeof e=="boolean"?e?t.setAttribute(n,""):t.removeAttribute(n):t[n]=e})}function g(t){if(!t||t._signalComponent||typeof t.type!="string")return t;let A=t,{props:n,ref:e}=A,r=I(A,["props","ref"]),o={},u=[],a;Object.keys(n).forEach(s=>{let i=n[s];if(z.has(s)){o[s]=i;return}if(m(i)){u.push(()=>{let x=i();a&&Q(a,s,x)}),o[s]=i();return}if(s==="children"&&Array.isArray(i)){let x=!1,j=i.map(l=>m(l)?(x=!0,g(l())):g(l));x&&u.push(()=>{let l=i.map(v=>g(m(v)?v():v)).join("");a&&(a.textContent=l)}),o[s]=j;return}o[s]=i}),f(()=>{u.forEach(s=>s())});let y=null;return u.length&&(y=s=>{a=s,e&&e(s)}),C({_signalComponent:M,props:o,ref:y||e},r)}var X=require("react");function U(t){return(0,X.useRef)(h(t)).current}
